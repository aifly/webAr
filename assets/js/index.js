webpackJsonp([0],[function(e,exports,t){try{(function(){"use strict";var e={init:function(){this.initWebgl(),this.initWebRTC()},initWebgl:function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=new THREE.Scene,a=new THREE.WebGLRenderer({alpha:!0,antialias:!0});a.setSize(e,t),a.setClearAlpha(0);var o=new THREE.PerspectiveCamera(45,e/t,.1,2e3);o.position.set(0,0,100),o.lookAt(n.position),n.add(o);for(var i=new THREE.Geometry,s=(new THREE.TextureLoader).load("./assets/images/disc.png"),r=0;r<40;r++){var d=new THREE.Vector3;d.x=200*Math.random()-100,d.y=200*Math.random()-100,d.z=200*Math.random()-100,i.vertices.push(d)}var c="#ffffff",h=new THREE.DirectionalLight(c);h.position.set(-40,60,-10),h.castShadow=!0,h.shadowCameraNear=2,h.shadowCameraFar=200,h.shadowCameraLeft=-50,h.shadowCameraRight=50,h.shadowCameraTop=50,h.shadowCameraBottom=-50,h.distance=0,h.intensity=.5,h.shadowMapHeight=1024,h.shadowMapWidth=1024,n.add(h);var p=new THREE.LoadingManager;p.onProgress=function(e,t,n){console.log(e,t,n)};var m=new THREE.OBJLoader(p),E=null;m.load("./assets/data/snowman.obj",function(e){e.traverse(function(e){}),e.position.y=-60,e.scale.set(.5,.5,.5),E=e,n.add(e)});var l=new THREE.Clock,v=new THREE.TrackballControls(o);v.rotateSpeed=1,v.zoomSpeed=1,v.panSpeed=1,v.staticMoving=!0;i.vertices.forEach(function(e,t){var a=2*Math.random()+.7,o=new THREE.Points(i,new THREE.PointsMaterial({size:a,map:s,transparent:!0}));o.speedY=Math.random()+.1,o.speedX=Math.random()*(Math.random()-.5>0?1:-1),o.speedY=o.speedY.toFixed(2),o.speedX=o.speedX.toFixed(2),n.add(o)});var u=new THREE.PointLight(16777215,1,1e3);n.add(u);var w=new THREE.HemisphereLight(255,65280,.6);w.position.set(0,500,0),n.add(w),document.body.appendChild(a.domElement);var r=0,f=function e(){v.update(l.getDelta()),E&&(E.rotation.y+=.01),u.position.x=300*Math.sin(r*Math.PI/180),u.position.z=300*Math.cos(r*Math.PI/180),r+=.2,n.children.forEach(function(e,t){e instanceof THREE.Points&&(e.position.y<-70&&(e.position.y=70),e.position.x<-30&&(e.position.x=30),e.position.y-=e.speedY,e.position.x-=e.speedX)}),a.render(n,o),requestAnimationFrame(e)};f()},initWebRTC:function(){var e=document.querySelector("video");navigator.getUserMedia&&navigator.mediaDevices.enumerateDevices().then(function(t){function n(t){t.getVideoTracks();t.oninactive=function(){console.log("Stream inactive")},window.stream=t,e.srcObject=t}function a(e){alert("error")}var o=window.constraints={audio:!1,video:{facingMode:"environment"}};navigator.mediaDevices.getUserMedia(o).then(n).catch(a)})}};e.init()}).call(this)}finally{}}]);